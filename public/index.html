
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Reversi Mone ğŸ¥Š VS May.C ğŸ‘‹</title>
    <style>
        body { font-family: sans-serif; text-align: center; }
        .board { display: grid; grid-template-columns: repeat(8, 40px); margin: 20px auto; }
        .cell { width: 40px; height: 40px; background: green; border: 1px solid black; }
        .Mone { background: deeppink; }
        .May\2e C { background: blueviolet; }
    </style>
</head>
<body>
    <h1>Reversi Mone ğŸ¥Š VS May.C ğŸ‘‹</h1>
    <input id="room" placeholder="Nom de la partie">
    <select id="joueur">
        <option value="Mone">Je suis Mone ğŸ¥Š</option>
        <option value="May.C">Je suis May.C ğŸ‘‹</option>
    </select>
    <button onclick="rejoindre()">Rejoindre la partie</button>
    <a id="whatsapp" href="#" target="_blank">ğŸ“² WhatsApp adversaire</a>
    <p id="info"></p>
    <p id="score"></p>
    <div id="plateau" class="board"></div>
    <button onclick="reset()">Rejouer</button>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        let monJoueur = "";
        let room = "";

        function rejoindre() {
            room = document.getElementById("room").value;
            monJoueur = document.getElementById("joueur").value;
            document.getElementById("whatsapp").href =
              "https://wa.me/?text=" + encodeURIComponent("Rejoins moi ici : " + window.location.href + " (partie: " + room + ")");
            socket.emit("rejoindre", { room, joueur: monJoueur });
        }

        function reset() {
            socket.emit("reset", room);
        }

        function afficher(game) {
            document.getElementById("info").innerText = "Vous Ãªtes : " + monJoueur + " | La partie commence !";
            document.getElementById("score").innerText =
              "Score : Mone ğŸ¥Š " + game.score["Mone"] + " - " + game.score["May.C"] + " ğŸ‘‹ May.C";
            const plateau = document.getElementById("plateau");
            plateau.innerHTML = "";
            game.board.forEach((row, y) => {
                row.forEach((cell, x) => {
                    const div = document.createElement("div");
                    div.className = "cell" + (cell ? " " + cell : "");
                    div.onclick = () => socket.emit("jouer", { room, x, y, joueur: monJoueur });
                    plateau.appendChild(div);
                });
            });
        }

        socket.on("etatJeu", afficher);
        setInterval(() => socket.emit("rejoindre", { room, joueur: monJoueur }), 2000);
    </script>
</body>
</html>
