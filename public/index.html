<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reversi Mone VS May.C</title>
  <style>
    body { font-family: Arial; background: #f5f5f5; text-align: center; }
    #board { display: grid; grid-template-columns: repeat(8, 40px); margin: 20px auto; }
    .cell {
      width: 40px; height: 40px; border: 1px solid #444; background: darkgreen;
      display: flex; align-items: center; justify-content: center;
    }
    .mone { background: fuchsia; width: 30px; height: 30px; border-radius: 50%; }
    .mayc { background: blueviolet; width: 30px; height: 30px; border-radius: 50%; }
  </style>
</head>
<body>
  <h1>Reversi Mone ðŸ¥Š VS May.C ðŸ‘‹</h1>
  <select id="player">
    <option value="mone">Je suis Mone ðŸ¥Š</option>
    <option value="mayc">Je suis May.C ðŸ‘‹</option>
  </select>
  <button onclick="joinGame()">Rejoindre la partie</button>
  <p id="status">En attente...</p>
  <div id="board"></div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
    let player = "";

    function joinGame() {
      player = document.getElementById("player").value;
      socket.emit("join", player);
      document.getElementById("status").innerText = "Vous Ãªtes : " + (player === "mone" ? "Mone ðŸ¥Š" : "May.C ðŸ‘‹");
    }

    socket.on("boardUpdate", (board) => {
      const boardDiv = document.getElementById("board");
      boardDiv.innerHTML = "";
      board.forEach((row, y) => {
        row.forEach((cell, x) => {
          const cellDiv = document.createElement("div");
          cellDiv.className = "cell";
          if (cell) {
            const token = document.createElement("div");
            token.className = cell;
            cellDiv.appendChild(token);
          }
          cellDiv.addEventListener("click", () => {
            socket.emit("play", { x, y, player });
          });
          boardDiv.appendChild(cellDiv);
        });
      });
    });
  </script>
</body>
</html>
